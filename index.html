<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>小木头</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="hexo搭建的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="小木头">
<meta property="og:url" content="http://www.liuchendi.com/index.html">
<meta property="og:site_name" content="小木头">
<meta property="og:description" content="hexo搭建的博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="小木头">
<meta name="twitter:description" content="hexo搭建的博客">
  
    <link rel="alternative" href="/atom.xml" title="小木头" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7i7ht3.com1.z0.glb.clouddn.com/avatar.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">小木头</a></h1>
		</hgroup>

		
		<p class="header-subtitle">心中无敌则无敌于天下</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						<li>友情链接</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
							<li><a href="/about">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/lcddhr" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/329096966" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="http://lcddhr.github.io/atom.xml" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/NSOperationQueue/" style="font-size: 10px;">NSOperationQueue</a> <a href="/tags/SDK开发/" style="font-size: 10px;">SDK开发</a> <a href="/tags/dispatch-semaphore/" style="font-size: 10px;">dispatch_semaphore</a> <a href="/tags/framework/" style="font-size: 10px;">framework</a> <a href="/tags/runtime/" style="font-size: 10px;">runtime</a> <a href="/tags/对象模型/" style="font-size: 10px;">对象模型</a> <a href="/tags/消息转发/" style="font-size: 10px;">消息转发</a> <a href="/tags/适配/" style="font-size: 10px;">适配</a>
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://xiaoxuetu.github.io/">小学徒的博客</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">小木头   iOS开发者</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">小木头</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://7i7ht3.com1.z0.glb.clouddn.com/avatar.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">小木头</h1>
			</hgroup>
			
			<p class="header-subtitle">心中无敌则无敌于天下</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
					<li><a href="/about">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/lcddhr" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/329096966" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="http://lcddhr.github.io/atom.xml" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap">
  
    <article id="post-iOS/9_Refactoring" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/10/iOS/9_Refactoring/" class="article-date">
  	<time datetime="2015-11-10T07:12:35.000Z" itemprop="datePublished">2015-11-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/10/iOS/9_Refactoring/">谈谈iOS重构</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>重构是一个比较难的哲学问题,到底项目该不该重构<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/iOS/">iOS</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2015/11/10/iOS/9_Refactoring/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/2_dispatch_semaphore和NSOperationQueue并发" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/11/10/iOS/2_dispatch_semaphore和NSOperationQueue并发/" class="article-date">
  	<time datetime="2015-11-10T06:50:45.000Z" itemprop="datePublished">2015-11-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/10/iOS/2_dispatch_semaphore和NSOperationQueue并发/">dispatch_semaphore和NSOperationQueue并发</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <pre><code>并发：同一个时间内运行多个任务。又叫共行性，是指处理多个同时性活动的能力。
并行：是指两个并发的任务同时发生。
</code></pre><p>并发不一定并行，并发不一定要同时发生。</p>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NSOperationQueue/">NSOperationQueue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dispatch-semaphore/">dispatch_semaphore</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/iOS/">iOS</a>
	</div>


      
        <p class="article-more-link">
          <a  href="/2015/11/10/iOS/2_dispatch_semaphore和NSOperationQueue并发/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/10_Git用法总结" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/03/16/iOS/10_Git用法总结/" class="article-date">
  	<time datetime="2015-03-16T03:30:56.000Z" itemprop="datePublished">2015-03-16</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/16/iOS/10_Git用法总结/">Git的用法总结</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##初始化<br>git init 初始化一个仓库</p>
<p>git add 添加一个文件到仓库里面</p>
<p>git commit -m “commit a file”   提交文件</p>
<p>git status 查看文件的状态</p>
<p>git diff  查看文件修改的不同</p>
<p> git log 查看提交的日志  //只能查看3次的日志</p>
<p>##版本回退</p>
<p>用<code>HEAD</code>表示当前版本，上一个版本是<code>HEAD^</code> ，上上一个版本是<code>HEAD^^</code></p>
<p>git reset –hard HEAD^   //回退到上一个版本</p>
<p>git reflog  //记录使用命令</p>
<p>##工作区和版本库</p>
<p>git add是把工作区的文件添加到版本库的暂存区</p>
<p>git commit再把暂存区的文件提交到分支</p>
<p>创建版本库的时候，git为我们自动创建了一个master分区</p>
<p>Untracked files:未提交的文件，新的</p>
<p>##工作区和版本库最新版本区别</p>
<p>##撤销修改<br>git checkout – file      <code>--</code>很重要表示撤回,丢弃工作区的修改 没有的话则表示创建一个新的分支</p>
<p>git reset HEAD file  可以把暂存区的修改撤销掉（unstage），重新放回工作区：:</p>
<p>##删除<br>git rm        从版本库里面删除</p>
<p>##切换分支<br>git checkout命令加上-b参数表示创建并切换，</p>
<p>git branch命令会列出所有分支，当前分支前面会标一个*号</p>
<p>git merge命令用于合并指定分支到当前分支</p>
<p>git log –graph –pretty=oneline –abbrev-commit 查看分支合并情况</p>
<p>git branch -d 删除分支</p>
<p>git stash 存储当前现场</p>
<p>git stash list 查看当前的现场</p>
<p>git stash apply恢复现场但是恢复后，stash内容并不删除，你需要用git stash drop来删除；</p>
<p>另一种方式是用git stash pop，恢复的同时把stash内容也删了：</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/">Git</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/Git/">Git</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/8_UIBezierPath" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/19/iOS/8_UIBezierPath/" class="article-date">
  	<time datetime="2014-09-19T12:30:56.000Z" itemprop="datePublished">2014-09-19</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/19/iOS/8_UIBezierPath/">UIBezierPath贝塞尔曲线</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##简介<br>引用<a href="http://baike.baidu.com/view/60154.htm?fr=aladdin" target="_blank" rel="external">百度百科</a>的一句话:</p>
<pre><code>贝赛尔曲线的每一个顶点都有两个控制点，用于控制在该顶点两侧的曲线的弧度。
曲线的定义有四个点：起始点、终止点（也称锚点）以及两个相互分离的中间点。
滑动两个中间点，贝塞尔曲线的形状会发生变化。
</code></pre><p>下面的图片是曲线的其中一种：</p>
<p><img src="http://iosddimage.qiniudn.com/7_UIBezierPath.jpg" alt="UIBezierPath.png"></p>
<p>今天主要是总结iOS当中贝塞尔曲线的使用,所以就不详细介绍这漂亮的曲线了，如果想深入了解的，可以参考<a href="http://zh.wikipedia.org/wiki/%E8%B2%9D%E8%8C%B2%E6%9B%B2%E7%B7%9A#.E4.BA.8C.E6.AC.A1.E6.96.B9.E8.B2.9D.E8.8C.B2.E6.9B.B2.E7.B7.9A" target="_blank" rel="external">wiki</a></p>
<p>##UIBezierPath</p>
<p><code>UIBezierPath</code>对象是CGPathRef数据类型的封装，可以方便的让我们画出<code>矩形</code>、<code>椭圆</code>或者<code>直线和曲线的组合</code>形状</p>
<p>最基本的使用方法是</p>
<pre><code><span class="comment">//设置描绘的起点</span>
- (<span class="typename">void</span>)<span class="string">moveToPoint:</span>(CGPoint)point; 

<span class="comment">//画直线</span>
- (<span class="typename">void</span>)<span class="string">addLineToPoint:</span>(CGPoint)point; 

<span class="comment">//画曲线，分别对应终点和两个控制点</span>
- (<span class="typename">void</span>)<span class="string">addCurveToPoint:</span>(CGPoint)endPoint <span class="string">controlPoint1:</span>(CGPoint)controlPoint1 <span class="string">controlPoint2:</span>(CGPoint)controlPoint2;

<span class="comment">//画圆弧</span>
- (<span class="typename">void</span>)<span class="string">addArcWithCenter:</span>(CGPoint)center <span class="string">radius:</span>(CGFloat)radius <span class="string">startAngle:</span>(CGFloat)startAngle <span class="string">endAngle:</span>(CGFloat)endAngle <span class="string">clockwise:</span>(BOOL)clockwise
</code></pre><p>画一个圆形</p>
<pre><code>UIBezierPath *path = [[UIBezierPath alloc] init];
[path moveToPoint:CGPointMake(<span class="number">175</span>, <span class="number">100</span>)];
[path addArcWithCenter:CGPointMake(<span class="number">150</span>, <span class="number">100</span>) radius:<span class="number">25</span> startAngle:<span class="number">0</span> endAngle:<span class="number">2</span>*M_PI clockwise:YES];
</code></pre><p><img src="http://iosddimage.qiniudn.com/8_%E5%9C%86%E5%BD%A2.png" alt="圆形"></p>
<p>剩余的明天上班后再回来总结</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/iOS/">iOS</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/7_iOS_Fit_Collection" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/18/iOS/7_iOS_Fit_Collection/" class="article-date">
  	<time datetime="2014-09-18T12:18:56.000Z" itemprop="datePublished">2014-09-18</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/18/iOS/7_iOS_Fit_Collection/">iOS适配问题大收集</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>###1、iOS6中UITextField中secureTextEntry的bug<br>今天把SDK去做iOS6的测试，结果反馈回来一大堆bug，其中一个就是在做UITextField<code>明暗文切换</code>的时候,明明在iOS7运行的好好的跑到iOS6就错了,而且功能都实现不了,后来在<a href="http://stackoverflow.com/questions/6710019/uitextfield-securetextentry-works-going-from-yes-to-no-but-changing-back-to-y" target="_blank" rel="external">这里</a>找到了答案</p>
<pre><code><span class="constant">_passwordTextField.enabled</span> = <span class="literal">false</span>;<span class="comment">//iOS6.1Bug fix</span>
<span class="constant">
_passwordTextField.secureTextEntry</span> = YES;
<span class="constant">
_passwordTextField.enabled</span> = <span class="literal">true</span>;
</code></pre><p>###2、UIWebView不能响应键盘<br>因为在SDK里面有一个自定义的window,然后APP也有一个主window,当把自定义的window发送了<code>makeKeyAndVisible</code>消息之后,webView在iOS上面竟然不能响应键盘事件了,因为我的webView是全屏的，所以即使键盘弹出来了也有有可能被弹出来的webView遮挡主，解决办法是：</p>
<pre><code>在webView打开绘制到界面上的时候主<span class="built_in">window</span>发送消息makeKeyAndVisible,

关闭webView的时候再设置自定义的<span class="built_in">window</span>发送消息makeKeyAndVisible。
</code></pre><p>###3、UITableView分割线不能靠边的问题<br>    从ios7开始有个属性 separatorInset，一般你需要设置这个值为UIEdgeInsetsZero,否则，每个分割线的起点会从文字区域开始，左边会留白</p>
<pre><code><span class="built_in">UITableViewCell</span>的默认背景是白色的
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/适配/">适配</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/iOS/">iOS</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/6_first_Birthday" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/11/iOS/6_first_Birthday/" class="article-date">
  	<time datetime="2014-09-11T02:30:56.000Z" itemprop="datePublished">2014-09-11</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/11/iOS/6_first_Birthday/">毕业后的第一个生日</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##生日<br>貌似自己印象中的生日总是没有多大的感觉,与平常的生活差不多,每到生日的时候都不会忘记给老妈打一个电话唠叨几句，其实我心里在想的是感谢老妈的养育之恩，觉得生日最要感谢的人时我的母亲（听起来有点清高，但我心里的确是这么想的，勿见怪O(∩_∩)。。。）.也没多少人记得我生日,我也很少跟他们谈及,让我意外的是高中的橙子舍长却还及得我的生日，让我有点喜出望外，一句简单的祝福扫清了一天工作的疲惫，谢谢舍长。</p>
<p>##毕业后的工作<br>毕业两个多月了,开始还是处于选择工作的迷茫期，对于自己快要毕业了还要换工作是非常不好的现象,但是心里想去大公司工作的欲望从未停止过,无论如何自己也得想办法去大公司呆个几年，因为自己想要学习一些大公司文化的熏陶以及日常流程化的工作，而不是呆在小公司里自己的摸爬滚打。。。</p>
<p>毕业前在光点呆了3个月,X支付呆了2个月左右,五个多月的实习让自己的技术有了一定的成长。大多数情况多事自己的摸爬滚打,乐驼项目,x支付项目,茂名OA项目,虽然自己最后没有完整的参与下来,但一些开发技巧以及控件的掌握已经上升了一个等次，并且有了一些自己的小开发架构，现在回过头去砍这些代码总觉得为啥自己当初会写下这么烂的代码，哈哈。失败也好，总是有收获的。以至于到现在的XX游戏公司能够快速适应环境，很庆幸自己能够在毕业前进入一家游戏公司，虽然目前还是做SDK的开发，但是最近开始接触<code>Unity3D</code>让自己兴奋了一把。</p>
<p>为什么自己要换两次工作？首先,人往高处走，当一个地方满足不了你的成长的时候，又或者这个地方总是做着意义不大的工作，纯粹是帮人完成任务，当做廉价劳动力的时候，没有理由让我不换工作。</p>
<p>现在的工作情况: 也有重复的工作，代码不规范的情况，还有更多的挑战（Unity3D、新应用的开发）</p>
<p>##生活<br>最大的感触就是，赚钱真的不容易，要在大城市里面靠自己打拼换取一个属于自己的落脚点有点像天方夜谭。。。但人总是要积极乐观向上，机会很多，说不定沉淀久了哪一天就爆发了，所以保持一个乐观的心态工作，多学习，多思考总是错不了的。</p>
<p>开始正真意义上的断奶生活，靠自己的努力挣钱花的理所当然，只不过有时候物质欲望过于强烈，不过还不至于月光,零花钱还是有滴。</p>
<p>下班后喜欢在旁边小区广场上跑步锻炼身体，回来泡上一杯柠檬蜂蜜茶，还有时间的话就看看书写写博客之类的，感觉这样也还不错，至少为了上班我不会在去熬夜了。</p>
<p>好久没去踩车了,领着这么丁点工资想换个小轮都不够呀，说好去云南丽江的到现在都还没有去，算是大学生活里面最遗憾的一件事吧。</p>
<p>小侄女也去东莞了，不能再像以前一样随意玩、随意吃了，身边的朋友也茫茫碌碌的，虽然好朋友也没有几个，但是都联系也渐渐少了起来，都开始为了事业奋斗。</p>
<p>##情感<br>老爸8月31号为了坐飞机来了广州，带了老妈烧得一手好菜，还有两瓶家乡的酒，我看着老爸辛苦的样子，有种说不出来的感觉，现在总是会多去体谅一下父母，想有自己的一些行动去为他们做些什么，第一个月发工资后，我了解到老爸在家会失眠睡不着，我也就买了一个电热浴足盆给他。这让我想起了今年过年我拿着实习工资给老爸买了一台小米2S手机，现在的我总想可以让老爸老妈的生活变得更好，他们为我付出了这么多，自己也要懂得感恩。</p>
<p>和小魂淡谈恋爱差不多两年了,毕业就分手貌似在当今大学生里已经见怪不怪了，虽然她比我小两届，我也有过担心，但是现在我们的关系还是算比较稳定的，希望能够一直好好地走下去。</p>
<p>##最后<br>希望自己在第一年的工作中好好学习，踏踏实实的工作、以负责任的态度做好每一件事。</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/个人生活/">个人生活</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/5_load_initialize" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/09/10/iOS/5_load_initialize/" class="article-date">
  	<time datetime="2014-09-10T14:30:56.000Z" itemprop="datePublished">2014-09-10</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/09/10/iOS/5_load_initialize/">load和initialize区别</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="load">load</h1><p>先看一下苹果官方文档的解释</p>
<blockquote>
<p>Invoked whenever a class or category is added to the Objective-C runtime;<br>implement this method to perform class-specific behavior upon loading.</p>
</blockquote>
<p>这个方法在类被添加进来的时候就会调用，也就是说程序在开始加载期间，这个方法就被调用.</p>
<h1 id="initialize">initialize</h1><blockquote>
<p>Initializes the class before it receives its first message.<br>The runtime sends <code>initialize</code> to each class in a program just before the class, or any class that<br>inherits from it, is sent its first message from within the program. The runtime sends the<br><code>initialize</code> message to classes in a thread-safe manner. Superclasses receive this message before<br>their subclasses. The superclass implementation may be called multiple times if subclasses do not<br>implement <code>initialize—the</code> runtime will call the inherited implementation—or if subclasses<br>explicitly call <code>[super initialize]</code></p>
</blockquote>
<p>这个方法会在类的第一个方法调用前被调用。首先会先调用父类的<code>initialize</code>方法，如果子类没有实现<code>initialize</code>方法,那么父类会多次触发这个方法,为了避免这种情况的发生，可以在实现的方法里面添加一个判断：</p>
<pre><code>+ (<span class="keyword">void</span>)initialize {
    <span class="keyword">if</span> (<span class="keyword">self</span> == [ClassName <span class="keyword">self</span>]) {
     <span class="comment">// ... do the initialization ...</span>
    }
}
</code></pre><h1 id="选择使用的时机">选择使用的时机</h1><p>当类的加载是耗时或者需要消耗比较多的内存的时候,尽量不要在<code>load</code>方法里面做这些耗时的工作,因为这样只会增加App的启动时间,降低用户的体验。<br><code>initialize</code>其实可以被认为是延迟加载的方法，类加载的时候并不会执行这个方法，只有当类实例化的时候，或者类的第一个方法被调用的时候才会执行这个方法</p>
<h1 id="category中的load和initialize">category中的load和initialize</h1><p>在category中<code>load</code>方法会等到实现类加载完自身的<code>load</code>方法后再执行category的<code>load</code>方法.</p>
<p><code>initialize</code>则调用最后一个被加载完成的类的<code>initialize</code>的方法.</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/iOS/">iOS</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/4_framework" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/29/iOS/4_framework/" class="article-date">
  	<time datetime="2014-08-29T14:30:56.000Z" itemprop="datePublished">2014-08-29</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/29/iOS/4_framework/">SDK开发基础-Framework制作</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>##前言<br>从事游戏SDK开发一个多月了，这一个多月过得也蛮快的，这一个多月的工作让自己对一些控件的使用更加熟练，感谢小松哥对我的关心和照顾，给了我充足的时间自由发挥，同时也给了自己更多的时间及时总结，还记得面试游戏公司的时候我其实心里没底，因为我没打算做游戏，实习一直都是做应用，甚至我连SDK是什么都不知道。入职的第一天把电脑上的开发环境配置好了，然后剩下时间熟悉了下代码，第二天就开始项目的开发了，哈哈，搞得我一头雾水，看见一个项目里面有三个子工程顿时傻眼了，有这样的开发模式么。。  后来发现其中两个是framework，一个是关于View的，另外一个是关于View逻辑的，好家伙，竟然有这样开发的，顿时吸引了我及大的兴趣，就这样，我踏上了游戏SDK的开发之旅，未来半年内可能会给好多游戏接入SDK，虽然不是什么高难度的工作，但自己还是会认认真真的把本职工作做好。好啦，接下来的时间就谈谈SDK最基础的工作，如何制作<code>framework</code>.</p>
<p>##什么是framework<br><code>framework</code>从字面意思来看就是库的意思，没错，他的功能也就是存储共享一些可用资源,在系统需要的时候载入内存中，它的好处是多个应用程序可以同时使用同一个framework，而在内存中的拷贝只有一份。</p>
<p>##优点<br>    （1） 可以将不同类型的资源放在一起，更加容易安装和定位。<br>    （2） 可以进行版本的管理，能够不断的向后兼容。<br>    （3） 内存中只有一份framework的拷贝，可以减少内存的使用。</p>
<p>##缺点<br>    重新加入资源的时候（比如更换了图片）,需要重新Clean编译生成新的Framework，如果资源不多项目较小的话没什么感觉<br>    如果项目有点庞大的话，会出现一些莫名奇怪的错误，需要反反复复的Clean。（非常考验我们的耐心。。。）</p>
<p>##制作流程(举例)<br>1、首先我们先建立一个工程：<br><img src="http://iosddimage.qiniudn.com/4_framework1.png" alt="4_framework_1"></p>
<p>2、接着删除不必要的系统自带的Framework,清空后的界面如下:<br><img src="http://iosddimage.qiniudn.com/4_framework2.png" alt="4_framework_2"></p>
<p>3、删除系统自带的bundle,点击<code>Edit Scheme</code><br><img src="http://iosddimage.qiniudn.com/4_framework3.png" alt="4_framework_3"></p>
<p>4、打开<code>Manage Schemes</code><br><img src="http://iosddimage.qiniudn.com/4_framework4.png" alt="4_framework_4"></p>
<p>5、删除系统自带的Schemes<br><img src="http://iosddimage.qiniudn.com/4_framework5.png" alt="4_framework_5"></p>
<p>6、新建一个<code>Bundle</code>,名称叫DDiOSLibrary<br><img src="http://iosddimage.qiniudn.com/4_framework6.png" alt="4_framework_6"></p>
<p>7、打开<code>TARGETS</code>的设置（build setting）,把Base SDK调成7.1<br><img src="http://iosddimage.qiniudn.com/4_framework7.png" alt="4_framework_7"></p>
<p>8、找到<code>Deployment</code>,把<code>OS X Deployment Target</code> 设置成默认的<br><img src="http://iosddimage.qiniudn.com/4_framework8.png" alt="4_framework_8"></p>
<p>9、把<code>Dead Code Stripping</code>设置成NO,<code>MACH -O Type</code>设置成Relocatable Object File<br><img src="http://iosddimage.qiniudn.com/4_framework16.png" alt="4_framework_16"></p>
<p>10、把打包的类型修改成framework<br><img src="http://iosddimage.qiniudn.com/4_framework9.png" alt="4_framework_9"></p>
<p>11、在<code>plist</code>文件里面，修改Bundle creator OS Type code 修改成<code>FMWK</code>(framework的缩写)<br><img src="http://iosddimage.qiniudn.com/4_framework10.png" alt="4_framework_10"></p>
<p>12、最后记得注释掉预编译的头文件<br><img src="http://iosddimage.qiniudn.com/4_framework11.png" alt="4_framework_11"></p>
<p>13、接下来我们就可以添加自己写的接口文件了,这里建立了一个<code>DDNSStringUtil</code>文件,里面提供了一个类方法输出“hello”<br>记得在创建文件的时候要在Targets前打上勾<br><img src="http://iosddimage.qiniudn.com/4_framework12.png" alt="4_framework_12"></p>
<p>14、把这个头文件暴露出来，因为我们只管调用接口，不用关心接口的实现<br><img src="http://iosddimage.qiniudn.com/4_framework13.png" alt="4_framework_13"></p>
<p>15、把文件移动到Public部分<br><img src="http://iosddimage.qiniudn.com/4_framework14.png" alt="4_framework_14"></p>
<p>16、编译运行生成framework<br><img src="http://iosddimage.qiniudn.com/4_framework15.png" alt="4_framework_15"></p>
<p>17、最后把这个重新生成的Framework重新引入到另外一个项目中，然后调用这个接口可以看见以下输出<br><img src="http://iosddimage.qiniudn.com/4_framework17.png" alt="4_framework_17"></p>
<p>##可能会出现的错误<br>    can’t link with bundle (MH_BUNDLE) only dylibs (MH_DYLIB) file….</p>
<pre><code>出现这个问题可能是上面没有把Dead Code Stripping设置成NO,MACH -O <span class="keyword">Type</span>设置成Relocatable <span class="keyword">Object</span> <span class="keyword">File</span>
</code></pre>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SDK开发/">SDK开发</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/framework/">framework</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/iOS/">iOS</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/3_runtime" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/26/iOS/3_runtime/" class="article-date">
  	<time datetime="2014-08-26T03:30:56.000Z" itemprop="datePublished">2014-08-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/26/iOS/3_runtime/">浅析iOS高级编程-runtime</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<p>##简介##<br>简单来说, <code>runtime</code>是一个实现Objective-C语言的C库。对象可以用C语言中的结构体表示,而方法（methods）可以用C函数实现。事实上,他们差不多也是这么干了，另外再加上了一些额外的特性。这些结构体和函数被runtime函数封装后，Objective-C程序员可以在程序运行时创建,检查,修改类,对象和它们的方法。</p>
<p>Objective-C只是在C语言层面上加了些关键字和语法。真正让Objective-C如此强大的是它的运行时。它很小但却很强大。它的核心是消息分发。想要了解真正的runtime就必须先明白对象模型、消息的传递。</p>
<p>##对象模型##<br>NSObject类和Java中的Object类有点相似，是所有一切类的父类，也就是根类，打开 <code>NSObject.h</code>类可以发现</p>
<p><img src="http://iosddimage.qiniudn.com/3_runtime_NSObject.png" alt="runtime_NSObject"></p>
<p>在来看看<code>runtime.h</code>的组成,就会发现都有<code>isa</code>指针，这是个什么东东？</p>
<p><img src="http://iosddimage.qiniudn.com/3_runtime_runtime_head.png" alt="runtime_runtime_head"></p>
<p>根据上面两个类,可以发现一些信息:</p>
<pre><code><span class="attribute">isa指针</span>: <span class="string">每个对象都是类的实例,isa指针指向这个实例所属的类,每个类也是一个对象,类也有isa指针 </span>

<span class="http"><span class="attribute">super_class</span>: <span class="string">父类</span>

<span class="http"><span class="attribute">name</span>: <span class="string">类的名字</span>

<span class="http"><span class="attribute">info</span>: <span class="string">类的一些信息</span>

<span class="http"><span class="attribute">instance_size</span>: <span class="string">实例的大小</span>

<span class="undefined">objc_ivar_list：实例的参数列表

objc_method_list：实例的方法列表

objc_cache：方法的缓存

objc_protocol_list：协议方法列表</span></span></span></span></span>
</code></pre><p>接着我们来看一张图片：<a href="http://www.sealiesoftware.com/blog/class%20diagram.pdf" target="_blank" rel="external">类的模型</a></p>
<p><img src="http://iosddimage.qiniudn.com/3_runtime_class.png" alt="runtime_class"></p>
<p>从这张图片中,我们可以发现有以下的信息：</p>
<pre><code>（<span class="number">1</span>）类也是一个对象，这个对象是另外一个类的实例，这个类是meta(元类)

 (<span class="number">2</span>) 每个meta类也是一个对象，分别指向根meta类。

（<span class="number">3</span>）根元类的isa指针指向自己，形成了一个闭环。

（<span class="number">4</span>）在继承关系中，由于类方法的定义是保存在元类(metaclass)中，而方法调用的规则是，
     如果该类没有一个方法的实现，则向它的父类继续查找。所以，为了保证父类的类方法
     可以在子类中可以被调用，所以子类的元类会继承父类的元类，换而言之，类对象和元
     类对象有着同样的继承关系。
</code></pre><p>##消息(Message)##<br>执行一个方法，有些语言、编译器会执行一些额外的优化和错误检查，因为调用的关系很直接也很明显。但是对于消息分发来说，就不一定了。在发消息前不必知道某个对象是否能处理消息，你把消息发给它，它可能会处理，也可能会交给其他的objec 处理。一个消息不用对应一个方法、一个对象也可能实现一个方法来处理多条消息。</p>
<p>在objcetive中，消息是通过<code>objc_msgSend()</code>这个runtime函数实现的。编译器把消息的分发转变成<code>objc_msgSend</code>执行。</p>
<p>下面看一下这段代码：</p>
<pre><code><span class="property">id</span> returnValue = [someobject messagename:parameter];
</code></pre><p>其中someObject是接收者(receiver),messagename叫做Selector，Selector和参数合起来叫做消息.</p>
<pre><code><span class="function"><span class="title">objc_msgSend</span><span class="params">(id self, sel cmd,...)</span></span>
</code></pre><p>第一个参数代表接收者，第二个参数是Selector，后面的参数就是消息中得参数，位置顺序不变。所以根据上面的原型，我们可以把函数改写成这样：</p>
<pre><code>id returnValue = objc_msgsend<span class="list">(<span class="keyword">someobject</span>,@selector<span class="list">(<span class="keyword">messagename</span>:)</span>,parameter)</span><span class="comment">;</span>
</code></pre><p><code>objc_msgsend</code>函数会根据接受者和<code>selector</code>的类型调用适当的方法。会在接收者所属的类里面搜寻<code>方法列表(list of method)</code>.如果能找到与selector名称相符合的方法，就跳转至实现代码。如果找不到的话，就会向上查找，等找到合适的方法后跳转。如果还是找不到得话就会执行“消息转发”的操作。</p>
<p>按照这个思路，调用一个方法需要很多步骤。但是objc_msgsend会将结果缓存到<code>快速映射表(fast map)</code>里面，每个类都有一个这样的缓存，若是稍后还向该类发送相同的消息的话，执行起来就很快了。</p>
<p>##Method Swizzling##<br>Method Swizzling 可以交换两个方法的实现。为什么会有这样的功能呢？首先看看扩展类的两种途径，第一种是子类化，重写父类的方法，然后调用父类的实现。但是使用子类的过程中，如果返回的时父类的类型的话怎么办？可以使用Category,添加一个扩展方法，这个方法如果没有和系统调用的方法重名的话一般情况下是没有问题的，但是如果重写了系统的方法的话，那么就永远不能调用这个方法了。所以Method Swizzling这个方法能解决这些问题，技能扩展类，又还能调用原来类的实现，通常情况下先建立一个与系统对应的扩展类，然后通过method_exchangeImplementations方法交换它们的实现。</p>
<p>例如有一个NSString的Category</p>
<pre><code><span class="class"><span class="keyword">@interface</span> <span class="title">NSString</span> (<span class="title">Addition</span>)</span>
- (<span class="built_in">NSString</span> *)test_myLowerString;
<span class="keyword">@end</span>

<span class="class"><span class="keyword">@implementation</span> <span class="title">NSString</span> (<span class="title">Addition</span>)</span>

- (<span class="built_in">NSString</span> *)test_myLowerString
{
   <span class="built_in">NSString</span> *lowercase = [<span class="keyword">self</span> test_myLowerString];
   <span class="built_in">NSLog</span>(<span class="string">@"%@ =&gt;%@"</span>,<span class="keyword">self</span>,lowercase);
   <span class="keyword">return</span> lowercase;
}

<span class="keyword">@end</span>
</code></pre><p>如果我们想把这个类与系统的<code>lowercase</code>替换该如何做呢？</p>
<pre><code>NSString *testString = @<span class="string">"TEST"</span>;
NSLog(@<span class="string">"%@,"</span>,[testString lowercaseString]);

<span class="function"><span class="keyword">Method</span> <span class="title">originMethod</span> =</span> class_getInstanceMethod([NSString <span class="class"><span class="keyword">class</span>], @<span class="title">selector</span>(<span class="title">lowercaseString</span>));</span>
<span class="function"><span class="keyword">Method</span> <span class="title">swapMethod</span> =</span> class_getInstanceMethod([NSString <span class="class"><span class="keyword">class</span>], @<span class="title">selector</span>(<span class="title">test_myLowerString</span>));</span>
method_exchangeImplementations(originMethod, swapMethod);
NSLog(@<span class="string">"%@"</span>,[testString lowercaseString]);
</code></pre><p>查看打印的结果,可以发现系统的方法与我们写的category交换了,有点意思O(∩_∩)O哈哈~</p>
<pre><code><span class="keyword">test</span>,
<span class="keyword">TEST</span> =&gt;<span class="keyword">test</span>
<span class="keyword">test</span>
</code></pre><p>所以我们改写了系统的lowercaseString方法，每当我们调用扩展的test_myLowerString方法时候，其实是调用系统的lowercaseString方法，这种做法一般情况用在调试系统，不过最好不建议改写系统的一些方法，可能会带来不可调试的后果，所以使用前需慎重。</p>
<p>##动态方法处理和消息转发##<br>上面谈了<code>Method Swizzling</code>，是对消息处理的一种，接下来再谈另外一种方法的处理,如下图，是自己总结的一个思维导图：</p>
<p><img src="http://iosddimage.qiniudn.com/3_runtime_message_forward.png" alt="runtime_forward"></p>
<p>##参考资料:</p>
<p><a href="http://limboy.me/ios/2013/08/03/dynamic-tips-and-tricks-with-objective-c.html" target="_blank" rel="external">http://limboy.me/ios/2013/08/03/dynamic-tips-and-tricks-with-objective-c.html</a><br><a href="http://blog.devtang.com/blog/2013/10/15/objective-c-object-model/" target="_blank" rel="external">http://blog.devtang.com/blog/2013/10/15/objective-c-object-model/</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/runtime/">runtime</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/对象模型/">对象模型</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/消息转发/">消息转发</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/运行时/">运行时</a>
	</div>


      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
    <article id="post-iOS/1_NSTimer" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2014/08/24/iOS/1_NSTimer/" class="article-date">
  	<time datetime="2014-08-24T03:18:56.000Z" itemprop="datePublished">2014-08-24</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/08/24/iOS/1_NSTimer/">那些年我们踩过的坑-NSTimer</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>昨天下午工作的时候遇见一个这样的需求，网络请求失败后把请求数据保存到本地，并自动重发3次，时间间隔是10秒，如果3次后还失败的话，下一次启动这个接口的时候，把新数据和保存在本地的数据都要发送，刚开始以为没多少难度，不就是网络请求发送数据嘛，首先脑子里的第一反应就是用定时器，初始化定时器，然后触发相应的方法，设置请求的次数标志，超过3次停止定时器。事实却证明我还没有理解定时器……<br>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
      

      
        <p class="article-more-link">
          <a  href="/2014/08/24/iOS/1_NSTimer/#more">more >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>







  
  
</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2015 小木头
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>